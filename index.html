<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic Tac Toe</title>
  <style>
    :root{
      --bg1: #ffefba;
      --bg2: #ffffff;
      --accent1: #ff6b6b;
      --accent2: #ffd93d;
      --accent3: #6be4ff;
      --accent4: #7bffb2;
      --board: #ffffffcc;
      --tile-shadow: rgba(0,0,0,0.15);
      --text: #222;
      --muted: #666;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:2rem;
      color:var(--text);
    }

    .container{
      width:100%;
      max-width:980px;
      background: linear-gradient(180deg, rgba(255,255,255,0.75), rgba(255,255,255,0.9));
      border-radius:20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      padding:1.25rem;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:1rem;
      align-items:start;
    }

    header.app-header{
      grid-column: 1 / -1;
      display:flex;
      align-items:center;
      gap:1rem;
      margin-bottom:0.25rem;
    }
    .logo {
      width:76px;
      height:76px;
      border-radius:16px;
      background: conic-gradient(from 180deg at 50% 50%, var(--accent1), var(--accent2), var(--accent3), var(--accent4));
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-weight:800;
      font-size:26px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    }
    h1{
      margin:0;
      font-size:1.5rem;
      line-height:1;
    }
    p.lead { margin:0; color:var(--muted); font-size:0.95rem; }

    /* Board area */
    .play-area{
      padding:1rem;
      border-radius:14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.5));
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }

    .board{
      margin: .75rem auto 0;
      width: 100%;
      max-width:520px;
      aspect-ratio:1/1;
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:12px;
      padding:12px;
      background: linear-gradient(180deg, #f8f9ff, #eef7ff);
      border-radius:12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    }

    .cell{
      background: var(--board);
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:52px;
      font-weight:800;
      cursor:pointer;
      user-select:none;
      transition: transform 130ms ease, box-shadow 130ms;
      box-shadow: 0 6px 12px var(--tile-shadow);
    }
    .cell:hover{ transform: translateY(-6px) scale(1.02); box-shadow: 0 14px 26px rgba(0,0,0,0.14); }

    .cell[data-owner="X"]{ color: #ff6b6b; text-shadow: 0 3px 0 rgba(255,255,255,0.2); }
    .cell[data-owner="O"]{ color: #6be4ff; text-shadow: 0 3px 0 rgba(255,255,255,0.2); }

    .sidebar{
      padding:1rem;
      border-radius:12px;
      display:flex;
      flex-direction:column;
      gap:1rem;
      background: linear-gradient(180deg, rgba(255,255,255,0.4), rgba(255,255,255,0.25));
      align-items:stretch;
    }

    .card{
      padding:0.8rem;
      border-radius:10px;
      background: rgba(255,255,255,0.55);
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }

    .chooser{
      display:flex;
      gap:.5rem;
      align-items:center;
      justify-content:center;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.5rem;
      padding:0.6rem 0.9rem;
      border-radius:10px;
      cursor:pointer;
      border:none;
      font-weight:700;
      box-shadow: 0 6px 14px rgba(0,0,0,0.08);
      transition: transform 120ms ease;
      background: #fff;
    }
    .btn:active{ transform: translateY(2px); }

    .btn-choice{
      flex:1;
      font-size:1.1rem;
    }
    .btn-primary{
      background: linear-gradient(90deg,var(--accent1), var(--accent2));
      color:white;
    }
    .btn-ghost{ background:transparent; border: 2px dashed rgba(0,0,0,0.06); }

    .status{ font-weight:700; font-size:1.05rem; color:var(--muted); text-align:center; }
    .score-row{ display:flex; justify-content:space-between; gap:1rem; align-items:center; }
    .score{
      font-size:1.25rem;
      font-weight:800;
      padding:0.6rem 0.9rem;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      box-shadow: 0 6px 12px rgba(0,0,0,0.06);
      text-align:center;
    }
    .muted-small{ color:var(--muted); font-size:0.9rem; }

    .controls{ display:flex; gap:.5rem; align-items:center; justify-content:center; margin-top:.5rem; }
    .underline{ text-decoration:underline; cursor:pointer; color:var(--accent1); font-weight:700; }

    /* win highlight */
    .win { background: linear-gradient(90deg, rgba(255,235,179,0.9), rgba(199,255,199,0.85)); transform:scale(1.02) !important; box-shadow: 0 18px 40px rgba(0,0,0,0.12) !important; }

    footer.small{ grid-column: 1 / -1; text-align:center; color:var(--muted); font-size:0.9rem; margin-top:.5rem; }

    /* responsive */
    @media (max-width:920px){
      .container{ grid-template-columns: 1fr; }
      .sidebar{ order:2; }
    }

  </style>
</head>
<body>
  <div class="container" role="application" aria-label="Chacha Tic Tac Toe Game">
    <header class="app-header">
      <div class="logo" aria-hidden="true">C</div>
      <div>
        <h1>Tic Tac Toe</h1>
        <p class="lead">Play against the Computer. Pick your symbol and enjoy!</p>
      </div>
    </header>

    <section class="play-area" aria-labelledby="boardTitle">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div>
          <div id="boardTitle" class="muted-small">Game Board</div>
          <div class="status" id="status" aria-live="polite">Choose X or O to start</div>
        </div>
        <div style="text-align:right">
          <div class="muted-small">Round</div>
          <div class="score" id="round">0</div>
        </div>
      </div>

      <div class="board" id="board" role="grid" aria-label="tic tac toe board">
        <!-- 9 cells generated by JS -->
      </div>

      <div class="controls" style="margin-top:12px;">
        <button class="btn btn-ghost" id="btn-new">New Round</button>
        <button class="btn btn-ghost" id="btn-reset">Reset Scores</button>
      </div>
    </section>

    <aside class="sidebar" aria-labelledby="controlsTitle">
      <div class="card">
        <div id="controlsTitle" class="muted-small">Choose your symbol</div>
        <div class="chooser" style="margin-top:8px;">
          <button class="btn btn-choice btn-primary" id="chooseX" aria-pressed="false">X</button>
          <button class="btn btn-choice" id="chooseO" aria-pressed="false">O</button>
        </div>
        <div style="margin-top:10px;" class="muted-small">Tip: X starts first. If you choose O, Computer will place the first move.</div>
      </div>

      <div class="card">
        <div class="muted-small">Scoreboard</div>
        <div class="score-row" style="margin-top:8px;">
          <div style="flex:1">
            <div class="muted-small">You</div>
            <div id="score-player" class="score">0</div>
          </div>
          <div style="flex:1">
            <div class="muted-small">Computer</div>
            <div id="score-computer" class="score">0</div>
          </div>
        </div>
      </div>

      <div class="card" style="text-align:center">
        <div class="muted-small">Game Controls</div>
        <div style="margin-top:8px; display:flex; gap:.5rem; justify-content:center;">
          <button class="btn btn-ghost" id="btn-hint">Hint</button>
          <button class="btn btn-ghost" id="btn-show-wins">Show Wins</button>
        </div>
        <div style="margin-top:10px;" class="muted-small">Made for fun â€” colorful and safe for people.</div>
      </div>
    </aside>

    <footer class="small">Have fun and be kind to Computer ðŸ˜‰</footer>
  </div>

  <script>
    // Game logic: Tic Tac Toe vs Computer (Minimax for unbeatable play)
    (function(){
      const boardEl = document.getElementById('board');
      const statusEl = document.getElementById('status');
      const roundEl = document.getElementById('round');
      const scorePlayerEl = document.getElementById('score-player');
      const scoreComputerEl = document.getElementById('score-computer');

      const chooseX = document.getElementById('chooseX');
      const chooseO = document.getElementById('chooseO');
      const btnNew = document.getElementById('btn-new');
      const btnReset = document.getElementById('btn-reset');
      const btnHint = document.getElementById('btn-hint');
      const btnShowWins = document.getElementById('btn-show-wins');

      let board = Array(9).fill(null); // null, 'X' or 'O'
      let player = null;   // 'X' or 'O'
      let ai = null;       // 'X' or 'O'
      let current = null;  // whose turn it is
      let round = 0;
      let scores = {player:0, ai:0};
      let showWins = false;

      // Winning lines
      const wins = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      // init board DOM
      function createBoard(){
        boardEl.innerHTML = '';
        for(let i=0;i<9;i++){
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.index = i;
          cell.setAttribute('role','button');
          cell.setAttribute('aria-label','cell '+(i+1));
          cell.addEventListener('click', onCellClick);
          boardEl.appendChild(cell);
        }
      }

      function onCellClick(e){
        const idx = Number(e.currentTarget.dataset.index);
        if(!player) { // not started yet
          statusEl.textContent = 'Pick X or O to start.';
          return;
        }
        if(current !== player) return; // not player's turn
        if(board[idx]) return; // occupied
        makeMove(idx, player);
        updateBoard();
        const result = checkResult(board);
        if(result) return handleGameEnd(result);
        // AI turn
        current = ai;
        statusEl.textContent = "Computer is thinking...";
        // small delay for fun
        setTimeout(()=> {
          const move = bestMove(board, ai);
          makeMove(move, ai);
          updateBoard();
          const res = checkResult(board);
          if(res) return handleGameEnd(res);
          current = player;
          statusEl.textContent = "Your turn!";
        }, 450);
      }

      function makeMove(idx, who){
        board[idx] = who;
      }

      function updateBoard(){
        for(let i=0;i<9;i++){
          const cell = boardEl.children[i];
          const val = board[i];
          cell.textContent = val ? val : '';
          cell.dataset.owner = val ? val : '';
          cell.classList.remove('win');
        }
      }

      function checkResult(bd){
        // return {winner: 'X'/'O'/'draw', line: [i,j,k]} or null
        for(const line of wins){
          const [a,b,c] = line;
          if(bd[a] && bd[a] === bd[b] && bd[a] === bd[c]){
            return {winner: bd[a], line};
          }
        }
        if(bd.every(cell => cell)) return {winner: 'draw'};
        return null;
      }

      function handleGameEnd(result){
        round++;
        roundEl.textContent = round;
        if(result.winner === 'draw'){
          statusEl.textContent = "It's a draw! Well played.";
        } else {
          // highlight winning cells
          if(result.line){
            result.line.forEach(i => boardEl.children[i].classList.add('win'));
          }
          const winnerIsPlayer = result.winner === player;
          if(winnerIsPlayer){
            scores.player++;
            scorePlayerEl.textContent = scores.player;
            statusEl.textContent = "You won! Hooray ðŸŽ‰";
          } else {
            scores.ai++;
            scoreComputerEl.textContent = scores.ai;
            statusEl.textContent = "Computer wins! Try again.";
          }
        }
        // after a short pause, allow "New Round" or user can press New Round
        current = null;
      }

      // Choose symbol handlers
      chooseX.addEventListener('click', ()=>{
        startGame('X');
      });
      chooseO.addEventListener('click', ()=>{
        startGame('O');
      });

      btnNew.addEventListener('click', ()=> {
        if(!player) { statusEl.textContent = 'Pick X or O first.'; return;}
        newRound();
      });

      btnReset.addEventListener('click', ()=>{
        scores = {player:0, ai:0}; round = 0;
        scorePlayerEl.textContent = '0';
        scoreComputerEl.textContent = '0';
        roundEl.textContent = '0';
        newRound(true);
      });

      btnHint.addEventListener('click', ()=>{
        if(current !== player){ statusEl.textContent = "Wait for your turn to get a hint."; return; }
        const move = bestMove(board, player); // best move for player
        if(move === null) { statusEl.textContent = "No moves available."; return; }
        flashCell(move);
        statusEl.textContent = "Hint shown â€” try it!";
      });

      btnShowWins.addEventListener('click', ()=>{
        showWins = !showWins;
        btnShowWins.textContent = showWins ? 'Hide Wins' : 'Show Wins';
        if(showWins) revealAllWinningOpportunities();
      });

      function flashCell(i){
        const el = boardEl.children[i];
        el.animate([
          { transform: 'scale(1)', boxShadow: '0 6px 12px rgba(0,0,0,0.12)' },
          { transform: 'scale(1.08)', boxShadow: '0 20px 36px rgba(0,0,0,0.16)' },
          { transform: 'scale(1)', boxShadow: '0 6px 12px rgba(0,0,0,0.12)' }
        ], { duration: 600 });
      }

      function revealAllWinningOpportunities(){
        // naive: highlight lines that are 2 of same and one empty (for either player)
        const highlight = [];
        for(const line of wins){
          const [a,b,c] = line;
          const vals = [board[a], board[b], board[c]];
          const countX = vals.filter(v=>v==='X').length;
          const countO = vals.filter(v=>v==='O').length;
          const countEmpty = vals.filter(v=>v===null).length;
          if(countEmpty === 1 && (countX===2 || countO===2)){
            // highlight the empty cell
            const idx = line[vals.indexOf(null)];
            highlight.push(idx);
          }
        }
        // flash highlights
        highlight.forEach(i => flashCell(i));
      }

      // Start a new game/round
      function startGame(chosen){
        player = chosen;
        ai = (chosen === 'X') ? 'O' : 'X';
        chooseX.setAttribute('aria-pressed', chosen==='X');
        chooseO.setAttribute('aria-pressed', chosen==='O');
        chooseX.classList.toggle('btn-primary', chosen==='X');
        chooseO.classList.toggle('btn-primary', chosen==='O');
        newRound(true);
      }

      function newRound(resetBoardOnly=false){
        board = Array(9).fill(null);
        updateBoard();
        // clear win highlights
        for(let i=0;i<9;i++) boardEl.children[i].classList.remove('win');
        if(!player){
          statusEl.textContent = 'Pick X or O to start';
          return;
        }
        // If AI is 'X' it starts
        if(ai === 'X'){
          current = ai;
          statusEl.textContent = "Computer starts...";
          setTimeout(()=>{
            const move = bestMove(board, ai);
            makeMove(move, ai);
            updateBoard();
            current = player;
            statusEl.textContent = "Your turn!";
          }, 350);
        } else {
          current = player;
          statusEl.textContent = "Your turn!";
        }
        if(!resetBoardOnly){
          // nothing else
        }
      }

      // Minimax algorithm for perfect play
      function bestMove(bd, who){
        // If game already over return null
        if(checkResult(bd)) return null;
        // For performance, if board empty and ai to move, pick center
        const emptyIndices = bd.map((v,i)=>v?null:i).filter(i=>i!==null);
        if(emptyIndices.length === 9){
          return 4; // center
        }

        if(who === ai){
          let bestScore = -Infinity;
          let move = null;
          for(const i of emptyIndices){
            bd[i] = who;
            const score = minimax(bd, false);
            bd[i] = null;
            if(score > bestScore){ bestScore = score; move = i; }
          }
          return move;
        } else {
          // if asking best move for player (for hint), maximize player's outcome
          let bestScore = -Infinity;
          let move = null;
          for(const i of emptyIndices){
            bd[i] = who;
            const score = minimax(bd, false);
            bd[i] = null;
            if(score > bestScore){ bestScore = score; move = i; }
          }
          return move;
        }
      }

      function minimax(bd, isMaximizing){
        const res = checkResult(bd);
        if(res){
          if(res.winner === 'draw') return 0;
          return (res.winner === ai) ? 1 : -1;
        }
        const empties = bd.map((v,i)=>v?null:i).filter(i=>i!==null);
        if(isMaximizing){
          let best = -Infinity;
          for(const i of empties){
            bd[i] = ai;
            const score = minimax(bd, false);
            bd[i] = null;
            best = Math.max(best, score);
          }
          return best;
        } else {
          let best = Infinity;
          for(const i of empties){
            bd[i] = player;
            const score = minimax(bd, true);
            bd[i] = null;
            best = Math.min(best, score);
          }
          return best;
        }
      }

      // init
      createBoard();
      statusEl.textContent = "Pick X or O to start";
      // Optional: preselect X to make it faster for kids
      // startGame('X');
    })();
  </script>
</body>
</html>